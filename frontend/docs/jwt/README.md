# Вопросы для интервью по теме: JWT

## Что такое JWT? (Для HR)

JSON Web Tokens ‒ токены, хранящиеся на стороне клиента.
Такой токен состоит из трех частей: заголовков, тела и сигнатуры. 
В теле хранятся сессионные данные (обычно идентефикатор пользователя). 
Сигнатуру нельзя подделать не зная секретного ключа (который хранится на сервере).

## Из скольки частей состоит этот токен? (Для HR)

Токен JWT состоит из трех частей: заголовка (`header`), полезной нагрузки (`payload`) и подписи или данных шифрования. 

Первые два элемента — это JSON объекты определенной структуры. 
Третий элемент вычисляется на основании первых и зависит от выбранного алгоритма (в случае использования неподписанного JWT может быть опущен). 

Токены могут быть перекодированы в компактное представление (JWS/JWE Compact Serialization): к заголовку и полезной нагрузке применяется алгоритм кодирования Base64-URL, после чего добавляется подпись и все три элемента разделяются точками («.»).

К примеру, для заголовка и полезной нагрузки, которые выглядят следующим образом:

```
{
  "alg": "HS512",
  "typ": "JWT"
}
{
  "sub": "12345",
  "name": "John Gold",
  "admin": true
}
```

Получим следующее компактное представление (переводы строки добавлены для наглядности):

```
eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.
eyJzdWIiOiIxMjM0NSIsIm5hbWUiOiJKb2huIEdvbGQiLCJhZG1pbiI6dHJ1ZX0K.
LIHjWCBORSWMEibq-tnT8ue_deUqZx1K0XxCOXZRrBI
```

## Для чего используется AccessToken? (Для HR)

Access token - используется для авторизации запросов и хранения дополнительной информации о пользователе (аля user_id, user_role или еще что либо, эту информацию также называет payload).

## Для чего используется RefreshToken? (Для HR)

Refresh-токен — это токен, позволяющий клиентам запрашивать новые access-токены по истечении их времени жизни.
Данные токены обычно выдаются на длительный срок. 
Как правило, при использовании JSON токенов в клиент-серверных приложениях.

## Какие механизмы вы используете для хранения JWT в клиентской стороне? (Для HR)

Для хранения JWT в клиентской стороне можно использовать различные механизмы, включая:

Хранение в `localStorage`: JWT можно сохранять в локальном хранилище браузера с помощью JavaScript методов localStorage.setItem('jwt', token) для сохранения и localStorage.getItem('jwt') для извлечения. Однако, следует учитывать, что данные в localStorage доступны для чтения любому скрипту на странице.

Хранение в `sessionStorage`: JWT также можно хранить в сессионном хранилище браузера с помощью методов sessionStorage.setItem('jwt', token) и sessionStorage.getItem('jwt'). Данные в sessionStorage будут доступны только в рамках текущей вкладки браузера.

`Cookies`: JWT можно сохранять в cookie с помощью HTTP-заголовка Set-Cookie. Это позволяет передавать токен при каждом запросе на сервер, и при этом куки можно настроить на безопасное хранение с помощью атрибутов Secure и HttpOnly.

В `памяти приложения`: _**В некоторых случаях**_, JWT можно хранить в памяти приложения (например, в переменных JavaScript), особенно если требуется использовать токен только в рамках текущей сессии.
